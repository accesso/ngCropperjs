!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var a=t();for(var i in a)("object"==typeof exports?exports:e)[i]=a[i]}}(this,function(){return function(e){function t(i){if(a[i])return a[i].exports;var o=a[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),r=i(a(1)),s=i(a(2)),d=i(a(3)),c=i(a(5)),l=i(a(6)),h=i(a(7)),p=i(a(8)),u=i(a(9)),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(4)),f=/^data:/,g=void 0,v=function(){function e(t,a){o(this,e);var i=this;i.element=t,i.options=m.extend({},r.default,m.isPlainObject(a)&&a),i.loaded=!1,i.ready=!1,i.complete=!1,i.rotated=!1,i.cropped=!1,i.disabled=!1,i.replaced=!1,i.limited=!1,i.wheeling=!1,i.isImg=!1,i.originalUrl="",i.canvasData=null,i.cropBoxData=null,i.previews=null,i.init()}return n(e,[{key:"init",value:function(){var e=this,t=e.element,a=t.tagName.toLowerCase(),i=void 0;if(!m.getData(t,"cropper")){if(m.setData(t,"cropper",e),"img"===a){if(e.isImg=!0,e.originalUrl=i=t.getAttribute("src"),!i)return;i=t.src}else"canvas"===a&&window.HTMLCanvasElement&&(i=t.toDataURL());e.load(i)}}},{key:"load",value:function(e){var t=this,a=t.options,i=t.element;if(e)if(t.url=e,t.imageData={},a.checkOrientation&&window.ArrayBuffer)if(f.test(e))t.read(m.dataURLToArrayBuffer(e));else{var o=new XMLHttpRequest;o.onerror=o.onabort=function(){t.clone()},o.onload=function(){t.read(o.response)},a.checkCrossOrigin&&m.isCrossOriginURL(e)&&i.crossOrigin&&(e=m.addTimestamp(e)),o.open("get",e),o.responseType="arraybuffer",o.send()}else t.clone()}},{key:"read",value:function(e){var t=this,a=t.options,i=m.getOrientation(e),o=t.imageData,n=0,r=1,s=1;if(i>1)switch(t.url=m.arrayBufferToDataURL(e),i){case 2:r=-1;break;case 3:n=-180;break;case 4:s=-1;break;case 5:n=90,s=-1;break;case 6:n=90;break;case 7:n=90,r=-1;break;case 8:n=-90}a.rotatable&&(o.rotate=n),a.scalable&&(o.scaleX=r,o.scaleY=s),t.clone()}},{key:"clone",value:function(){var e=this,t=e.element,a=e.url,i=void 0,o=void 0,n=void 0,r=void 0;e.options.checkCrossOrigin&&m.isCrossOriginURL(a)&&((i=t.crossOrigin)?o=a:(i="anonymous",o=m.addTimestamp(a))),e.crossOrigin=i,e.crossOriginUrl=o;var s=m.createElement("img");i&&(s.crossOrigin=i),s.src=o||a,e.image=s,e.onStart=n=m.proxy(e.start,e),e.onStop=r=m.proxy(e.stop,e),e.isImg?t.complete?e.start():m.addListener(t,"load",n):(m.addListener(s,"load",n),m.addListener(s,"error",r),m.addClass(s,"cropper-hide"),t.parentNode.insertBefore(s,t.nextSibling))}},{key:"start",value:function(e){var t=this,a=t.isImg?t.element:t.image;e&&(m.removeListener(a,"load",t.onStart),m.removeListener(a,"error",t.onStop)),m.getImageSize(a,function(e,a){m.extend(t.imageData,{naturalWidth:e,naturalHeight:a,aspectRatio:e/a}),t.loaded=!0,t.build()})}},{key:"stop",value:function(){var e=this,t=e.image;m.removeListener(t,"load",e.onStart),m.removeListener(t,"error",e.onStop),m.removeChild(t),e.image=null}},{key:"build",value:function(){var e=this,t=e.options,a=e.element,i=e.image,o=void 0,n=void 0,r=void 0,d=void 0,c=void 0,l=void 0;if(e.loaded){e.ready&&e.unbuild();var h=m.createElement("div");h.innerHTML=s.default,e.container=o=a.parentNode,e.cropper=n=m.getByClass(h,"cropper-container")[0],e.canvas=r=m.getByClass(n,"cropper-canvas")[0],e.dragBox=d=m.getByClass(n,"cropper-drag-box")[0],e.cropBox=c=m.getByClass(n,"cropper-crop-box")[0],e.viewBox=m.getByClass(n,"cropper-view-box")[0],e.face=l=m.getByClass(c,"cropper-face")[0],m.appendChild(r,i),m.addClass(a,"cropper-hidden"),o.insertBefore(n,a.nextSibling),e.isImg||m.removeClass(i,"cropper-hide"),e.initPreview(),e.bind(),t.aspectRatio=Math.max(0,t.aspectRatio)||NaN,t.viewMode=Math.max(0,Math.min(3,Math.round(t.viewMode)))||0,t.autoCrop?(e.cropped=!0,t.modal&&m.addClass(d,"cropper-modal")):m.addClass(c,"cropper-hidden"),t.guides||m.addClass(m.getByClass(c,"cropper-dashed"),"cropper-hidden"),t.center||m.addClass(m.getByClass(c,"cropper-center"),"cropper-hidden"),t.background&&m.addClass(n,"cropper-bg"),t.highlight||m.addClass(l,"cropper-invisible"),t.cropBoxMovable&&(m.addClass(l,"cropper-move"),m.setData(l,"action","all")),t.cropBoxResizable||(m.addClass(m.getByClass(c,"cropper-line"),"cropper-hidden"),m.addClass(m.getByClass(c,"cropper-point"),"cropper-hidden")),e.setDragMode(t.dragMode),e.render(),e.ready=!0,e.setData(t.data),e.completing=setTimeout(function(){m.isFunction(t.ready)&&m.addListener(a,"ready",t.ready,!0),m.dispatchEvent(a,"ready"),m.dispatchEvent(a,"crop",e.getData()),e.complete=!0},0)}}},{key:"unbuild",value:function(){var e=this;e.ready&&(e.complete||clearTimeout(e.completing),e.ready=!1,e.complete=!1,e.initialImageData=null,e.initialCanvasData=null,e.initialCropBoxData=null,e.containerData=null,e.canvasData=null,e.cropBoxData=null,e.unbind(),e.resetPreview(),e.previews=null,e.viewBox=null,e.cropBox=null,e.dragBox=null,e.canvas=null,e.container=null,m.removeChild(e.cropper),e.cropper=null)}}],[{key:"noConflict",value:function(){return window.Cropper=g,e}},{key:"setDefaults",value:function(e){m.extend(r.default,m.isPlainObject(e)&&e)}}]),e}();m.extend(v.prototype,d.default),m.extend(v.prototype,c.default),m.extend(v.prototype,l.default),m.extend(v.prototype,h.default),m.extend(v.prototype,p.default),m.extend(v.prototype,u.default),"undefined"!=typeof window&&(g=window.Cropper,window.Cropper=v),t.default=v},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={viewMode:0,dragMode:"crop",aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default='<div class="cropper-container"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-action="e"></span><span class="cropper-line line-n" data-action="n"></span><span class="cropper-line line-w" data-action="w"></span><span class="cropper-line line-s" data-action="s"></span><span class="cropper-point point-e" data-action="e"></span><span class="cropper-point point-n" data-action="n"></span><span class="cropper-point point-w" data-action="w"></span><span class="cropper-point point-s" data-action="s"></span><span class="cropper-point point-ne" data-action="ne"></span><span class="cropper-point point-nw" data-action="nw"></span><span class="cropper-point point-sw" data-action="sw"></span><span class="cropper-point point-se" data-action="se"></span></div></div>'},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(4));t.default={render:function(){var e=this;e.initContainer(),e.initCanvas(),e.initCropBox(),e.renderCanvas(),e.cropped&&e.renderCropBox()},initContainer:function(){var e=this,t=e.options,a=e.element,o=e.container,n=e.cropper,r=void 0;i.addClass(n,"cropper-hidden"),i.removeClass(a,"cropper-hidden"),e.containerData=r={width:Math.max(o.offsetWidth,Number(t.minContainerWidth)||200),height:Math.max(o.offsetHeight,Number(t.minContainerHeight)||100)},i.setStyle(n,{width:r.width,height:r.height}),i.addClass(a,"cropper-hidden"),i.removeClass(n,"cropper-hidden")},initCanvas:function(){var e=this,t=e.options.viewMode,a=e.containerData,o=e.imageData,n=90===Math.abs(o.rotate),r=n?o.naturalHeight:o.naturalWidth,s=n?o.naturalWidth:o.naturalHeight,d=r/s,c=a.width,l=a.height;a.height*d>a.width?3===t?c=a.height*d:l=a.width/d:3===t?l=a.width/d:c=a.height*d;var h={naturalWidth:r,naturalHeight:s,aspectRatio:d,width:c,height:l};h.oldLeft=h.left=(a.width-c)/2,h.oldTop=h.top=(a.height-l)/2,e.canvasData=h,e.limited=1===t||2===t,e.limitCanvas(!0,!0),e.initialImageData=i.extend({},o),e.initialCanvasData=i.extend({},h)},limitCanvas:function(e,t){var a=this,i=a.options,o=i.viewMode,n=a.containerData,r=a.canvasData,s=r.aspectRatio,d=a.cropBoxData,c=a.cropped&&d,l=void 0,h=void 0,p=void 0,u=void 0;e&&(l=Number(i.minCanvasWidth)||0,h=Number(i.minCanvasHeight)||0,o>1?(l=Math.max(l,n.width),h=Math.max(h,n.height),3===o&&(h*s>l?l=h*s:h=l/s)):o>0&&(l?l=Math.max(l,c?d.width:0):h?h=Math.max(h,c?d.height:0):c&&(l=d.width,(h=d.height)*s>l?l=h*s:h=l/s)),l&&h?h*s>l?h=l/s:l=h*s:l?h=l/s:h&&(l=h*s),r.minWidth=l,r.minHeight=h,r.maxWidth=1/0,r.maxHeight=1/0),t&&(o?(p=n.width-r.width,u=n.height-r.height,r.minLeft=Math.min(0,p),r.minTop=Math.min(0,u),r.maxLeft=Math.max(0,p),r.maxTop=Math.max(0,u),c&&a.limited&&(r.minLeft=Math.min(d.left,d.left+(d.width-r.width)),r.minTop=Math.min(d.top,d.top+(d.height-r.height)),r.maxLeft=d.left,r.maxTop=d.top,2===o&&(r.width>=n.width&&(r.minLeft=Math.min(0,p),r.maxLeft=Math.max(0,p)),r.height>=n.height&&(r.minTop=Math.min(0,u),r.maxTop=Math.max(0,u))))):(r.minLeft=-r.width,r.minTop=-r.height,r.maxLeft=n.width,r.maxTop=n.height))},renderCanvas:function(e){var t=this,a=t.canvasData,o=t.imageData,n=o.rotate,r=void 0,s=void 0;t.rotated&&(t.rotated=!1,(r=(s=i.getRotatedSizes({width:o.width,height:o.height,degree:n})).width/s.height)!==a.aspectRatio&&(a.left-=(s.width-a.width)/2,a.top-=(s.height-a.height)/2,a.width=s.width,a.height=s.height,a.aspectRatio=r,a.naturalWidth=o.naturalWidth,a.naturalHeight=o.naturalHeight,n%180&&(s=i.getRotatedSizes({width:o.naturalWidth,height:o.naturalHeight,degree:n}),a.naturalWidth=s.width,a.naturalHeight=s.height),t.limitCanvas(!0,!1))),(a.width>a.maxWidth||a.width<a.minWidth)&&(a.left=a.oldLeft),(a.height>a.maxHeight||a.height<a.minHeight)&&(a.top=a.oldTop),a.width=Math.min(Math.max(a.width,a.minWidth),a.maxWidth),a.height=Math.min(Math.max(a.height,a.minHeight),a.maxHeight),t.limitCanvas(!1,!0),a.oldLeft=a.left=Math.min(Math.max(a.left,a.minLeft),a.maxLeft),a.oldTop=a.top=Math.min(Math.max(a.top,a.minTop),a.maxTop),i.setStyle(t.canvas,{width:a.width,height:a.height,left:a.left,top:a.top}),t.renderImage(),t.cropped&&t.limited&&t.limitCropBox(!0,!0),e&&t.output()},renderImage:function(e){var t=this,a=t.canvasData,o=t.imageData,n=void 0,r=void 0,s=void 0,d=void 0;o.rotate&&(n={width:s=(r=i.getRotatedSizes({width:a.width,height:a.height,degree:o.rotate,aspectRatio:o.aspectRatio},!0)).width,height:d=r.height,left:(a.width-s)/2,top:(a.height-d)/2}),i.extend(o,n||{width:a.width,height:a.height,left:0,top:0});var c=i.getTransform(o);i.setStyle(t.image,{width:o.width,height:o.height,marginLeft:o.left,marginTop:o.top,WebkitTransform:c,msTransform:c,transform:c}),e&&t.output()},initCropBox:function(){var e=this,t=e.options,a=t.aspectRatio,o=Number(t.autoCropArea)||.8,n=e.canvasData,r={width:n.width,height:n.height};a&&(n.height*a>n.width?r.height=r.width/a:r.width=r.height*a),e.cropBoxData=r,e.limitCropBox(!0,!0),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),r.width=Math.max(r.minWidth,r.width*o),r.height=Math.max(r.minHeight,r.height*o),r.oldLeft=r.left=n.left+(n.width-r.width)/2,r.oldTop=r.top=n.top+(n.height-r.height)/2,e.initialCropBoxData=i.extend({},r)},limitCropBox:function(e,t){var a=this,i=a.options,o=i.aspectRatio,n=a.containerData,r=a.canvasData,s=a.cropBoxData,d=a.limited,c=void 0,l=void 0,h=void 0,p=void 0;e&&(c=Number(i.minCropBoxWidth)||0,l=Number(i.minCropBoxHeight)||0,c=Math.min(c,n.width),l=Math.min(l,n.height),h=Math.min(n.width,d?r.width:n.width),p=Math.min(n.height,d?r.height:n.height),o&&(c&&l?l*o>c?l=c/o:c=l*o:c?l=c/o:l&&(c=l*o),p*o>h?p=h/o:h=p*o),s.minWidth=Math.min(c,h),s.minHeight=Math.min(l,p),s.maxWidth=h,s.maxHeight=p),t&&(d?(s.minLeft=Math.max(0,r.left),s.minTop=Math.max(0,r.top),s.maxLeft=Math.min(n.width,r.left+r.width)-s.width,s.maxTop=Math.min(n.height,r.top+r.height)-s.height):(s.minLeft=0,s.minTop=0,s.maxLeft=n.width-s.width,s.maxTop=n.height-s.height))},renderCropBox:function(){var e=this,t=e.options,a=e.containerData,o=e.cropBoxData;(o.width>o.maxWidth||o.width<o.minWidth)&&(o.left=o.oldLeft),(o.height>o.maxHeight||o.height<o.minHeight)&&(o.top=o.oldTop),o.width=Math.min(Math.max(o.width,o.minWidth),o.maxWidth),o.height=Math.min(Math.max(o.height,o.minHeight),o.maxHeight),e.limitCropBox(!1,!0),o.oldLeft=o.left=Math.min(Math.max(o.left,o.minLeft),o.maxLeft),o.oldTop=o.top=Math.min(Math.max(o.top,o.minTop),o.maxTop),t.movable&&t.cropBoxMovable&&i.setData(e.face,"action",o.width===a.width&&o.height===a.height?"move":"all"),i.setStyle(e.cropBox,{width:o.width,height:o.height,left:o.left,top:o.top}),e.cropped&&e.limited&&e.limitCanvas(!0,!0),e.disabled||e.output()},output:function(){var e=this;e.preview(),e.complete&&i.dispatchEvent(e.element,"crop",e.getData())}}},function(e,t){"use strict";function a(e){return k.call(e).slice(8,-1).toLowerCase()}function i(e){return"number"==typeof e&&!isNaN(e)}function o(e){return void 0===e}function n(e){return"object"===(void 0===e?"undefined":y(e))&&null!==e}function r(e){return"function"===a(e)}function s(e){return Array.isArray?Array.isArray(e):"array"===a(e)}function d(e){return"string"==typeof e&&(e=e.trim?e.trim():e.replace(B,"$1")),e}function c(e,t){if(e&&r(t)){var a=void 0;if(s(e)||i(e.length)){var o=e.length;for(a=0;a<o&&!1!==t.call(e,e[a],a,e);a++);}else n(e)&&Object.keys(e).forEach(function(a){t.call(e,e[a],a,e)})}return e}function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];var i=!0===t[0],o=i?t[1]:t[0];return t.length>1&&(t.shift(),t.forEach(function(e){n(e)&&Object.keys(e).forEach(function(t){i&&n(o[t])?l(!0,o[t],e[t]):o[t]=e[t]})})),o}function h(e,t){if(i(e.length))c(e,function(e){h(e,t)});else if(e.classList)e.classList.add(t);else{var a=d(e.className);a?a.indexOf(t)<0&&(e.className=a+" "+t):e.className=t}}function p(e,t){i(e.length)?c(e,function(e){p(e,t)}):e.classList?e.classList.remove(t):e.className.indexOf(t)>=0&&(e.className=e.className.replace(t,""))}function u(e,t,a){i(e.length)?c(e,function(e){u(e,t,a)}):a?h(e,t):p(e,t)}function m(e){return e.replace(C,"$1-$2").toLowerCase()}function f(e,t,a){var i=d(t).split(D);i.length>1?c(i,function(t){f(e,t,a)}):e.removeEventListener?e.removeEventListener(t,a,!1):e.detachEvent&&e.detachEvent("on"+t,a)}function g(e,t,a,i){var o=d(t).split(D),n=a;o.length>1?c(o,function(t){g(e,t,a)}):(i&&(a=function(){for(var i=arguments.length,o=Array(i),r=0;r<i;r++)o[r]=arguments[r];return f(e,t,a),n.apply(e,o)}),e.addEventListener?e.addEventListener(t,a,!1):e.attachEvent&&e.attachEvent("on${type}",a))}function v(e){return document.createElement(e)}function w(e,t){var a=Math.abs(e.degree)%180,i=(a>90?180-a:a)*Math.PI/180,o=Math.sin(i),n=Math.cos(i),r=e.width,s=e.height,d=e.aspectRatio,c=void 0,l=void 0;return t?l=(c=r/(n+o/d))/d:(c=r*n+s*o,l=r*o+s*n),{width:c,height:l}}function b(e,t,a){var i="",o=t;for(a+=t;o<a;o++)i+=W(e.getUint8(o));return i}Object.defineProperty(t,"__esModule",{value:!0});var y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};t.typeOf=a,t.isNumber=i,t.isUndefined=o,t.isObject=n,t.isPlainObject=function(e){if(!n(e))return!1;try{var t=e.constructor,a=t.prototype;return t&&a&&X.call(a,"isPrototypeOf")}catch(e){return!1}},t.isFunction=r,t.isArray=s,t.toArray=function(e,t){return t=t>=0?t:0,Array.from?Array.from(e).slice(t):S.call(e,t)},t.trim=d,t.each=c,t.extend=l,t.proxy=function(e,t){for(var a=arguments.length,i=Array(a>2?a-2:0),o=2;o<a;o++)i[o-2]=arguments[o];return function(){for(var a=arguments.length,o=Array(a),n=0;n<a;n++)o[n]=arguments[n];return e.apply(t,i.concat(o))}},t.setStyle=function(e,t){var a=e.style;c(t,function(e,t){L.test(t)&&i(e)&&(e+="px"),a[t]=e})},t.hasClass=function(e,t){return e.classList?e.classList.contains(t):e.className.indexOf(t)>-1},t.addClass=h,t.removeClass=p,t.toggleClass=u,t.hyphenate=m,t.getData=function(e,t){return n(e[t])?e[t]:e.dataset?e.dataset[t]:e.getAttribute("data-"+m(t))},t.setData=function(e,t,a){n(a)?e[t]=a:e.dataset?e.dataset[t]=a:e.setAttribute("data-"+m(t),a)},t.removeData=function(e,t){n(e[t])?delete e[t]:e.dataset?delete e.dataset[t]:e.removeAttribute("data-"+m(t))},t.removeListener=f,t.dispatchEvent=function(e,t,a){if(e.dispatchEvent){var i=void 0;return r(Event)&&r(CustomEvent)?i=o(a)?new Event(t,{bubbles:!0,cancelable:!0}):new CustomEvent(t,{detail:a,bubbles:!0,cancelable:!0}):o(a)?(i=document.createEvent("Event")).initEvent(t,!0,!0):(i=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,a),e.dispatchEvent(i)}return!e.fireEvent||e.fireEvent("on"+t)},t.getEvent=function(e){var t=e||window.event;if(t.target||(t.target=t.srcElement||document),!i(t.pageX)&&i(t.clientX)){var a=e.target.ownerDocument||document,o=a.documentElement,n=a.body;t.pageX=t.clientX+((o&&o.scrollLeft||n&&n.scrollLeft||0)-(o&&o.clientLeft||n&&n.clientLeft||0)),t.pageY=t.clientY+((o&&o.scrollTop||n&&n.scrollTop||0)-(o&&o.clientTop||n&&n.clientTop||0))}return t},t.getOffset=function(e){var t=document.documentElement,a=e.getBoundingClientRect();return{left:a.left+((window.scrollX||t&&t.scrollLeft||0)-(t&&t.clientLeft||0)),top:a.top+((window.scrollY||t&&t.scrollTop||0)-(t&&t.clientTop||0))}},t.getTouchesCenter=function(e){var t=e.length,a=0,i=0;return t&&(c(e,function(e){a+=e.pageX,i+=e.pageY}),a/=t,i/=t),{pageX:a,pageY:i}},t.getByTag=function(e,t){return e.getElementsByTagName(t)},t.getByClass=function(e,t){return e.getElementsByClassName?e.getElementsByClassName(t):e.querySelectorAll("."+t)},t.createElement=v,t.appendChild=function(e,t){e.appendChild(t)},t.removeChild=function(e){e.parentNode&&e.parentNode.removeChild(e)},t.empty=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},t.isCrossOriginURL=function(e){var t=e.match(M);return t&&(t[1]!==location.protocol||t[2]!==location.hostname||t[3]!==location.port)},t.addTimestamp=function(e){var t="timestamp="+(new Date).getTime();return e+(-1===e.indexOf("?")?"?":"&")+t},t.getImageSize=function(e,t){if(!e.naturalWidth||E){var a=v("img");a.onload=function(){t(this.width,this.height)},a.src=e.src}else t(e.naturalWidth,e.naturalHeight)},t.getTransform=function(e){var t=[],a=e.rotate,o=e.scaleX,n=e.scaleY;return i(a)&&0!==a&&t.push("rotate("+a+"deg)"),i(o)&&1!==o&&t.push("scaleX("+o+")"),i(n)&&1!==n&&t.push("scaleY("+n+")"),t.length?t.join(" "):"none"},t.getRotatedSizes=w,t.getSourceCanvas=function(e,t){var a=v("canvas"),o=a.getContext("2d"),n=0,r=0,s=t.naturalWidth,d=t.naturalHeight,c=t.rotate,l=t.scaleX,h=t.scaleY,p=i(l)&&i(h)&&(1!==l||1!==h),u=i(c)&&0!==c,m=u||p,f=s*Math.abs(l||1),g=d*Math.abs(h||1),b=void 0,y=void 0,x=void 0;return p&&(b=f/2,y=g/2),u&&(b=(f=(x=w({width:f,height:g,degree:c})).width)/2,y=(g=x.height)/2),a.width=f,a.height=g,m&&(n=-s/2,r=-d/2,o.save(),o.translate(b,y)),u&&o.rotate(c*Math.PI/180),p&&o.scale(l,h),o.drawImage(e,Math.floor(n),Math.floor(r),Math.floor(s),Math.floor(d)),m&&o.restore(),a},t.getStringFromCharCode=b,t.getOrientation=function(e){var t=new DataView(e),a=t.byteLength,i=void 0,o=void 0,n=void 0,r=void 0,s=void 0,d=void 0,c=void 0,l=void 0,h=void 0;if(255===t.getUint8(0)&&216===t.getUint8(1))for(l=2;l<a;){if(255===t.getUint8(l)&&225===t.getUint8(l+1)){d=l;break}l++}if(d&&(o=d+10,"Exif"===b(t,d+4,4)&&((r=18761===(s=t.getUint16(o)))||19789===s)&&42===t.getUint16(o+2,r)&&(n=t.getUint32(o+4,r))>=8&&(c=o+n)),c)for(a=t.getUint16(c,r),h=0;h<a;h++)if(l=c+12*h+2,274===t.getUint16(l,r)){l+=8,i=t.getUint16(l,r),E&&t.setUint16(l,1,r);break}return i},t.dataURLToArrayBuffer=function(e){var t=e.replace(x,""),a=atob(t),i=a.length,o=new ArrayBuffer(i),n=new Uint8Array(o),r=void 0;for(r=0;r<i;r++)n[r]=a.charCodeAt(r);return o},t.arrayBufferToDataURL=function(e){var t=new Uint8Array(e),a=t.length,i="",o=void 0;for(o=0;o<a;o++)i+=W(t[o]);return"data:image/jpeg;base64,"+btoa(i)};var x=/^data:([^;]+);base64,/,C=/([a-z\d])([A-Z])/g,M=/^(https?:)\/\/([^:\/\?#]+):?(\d*)/i,D=/\s+/,L=/^(width|height|left|top|marginLeft|marginTop)$/,B=/^\s+(.*)\s+$/,O=/(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i,T=window.navigator,E=T&&O.test(T.userAgent),N=Object.prototype,k=N.toString,X=N.hasOwnProperty,S=Array.prototype.slice,W=String.fromCharCode;t.addListener=g},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(4));t.default={initPreview:function(){var e=this,t=e.options.preview,a=i.createElement("img"),o=e.crossOrigin,n=o?e.crossOriginUrl:e.url;if(o&&(a.crossOrigin=o),a.src=n,i.appendChild(e.viewBox,a),e.image2=a,t){var r=document.querySelectorAll(t);e.previews=r,i.each(r,function(e){var t=i.createElement("img");i.setData(e,"preview",{width:e.offsetWidth,height:e.offsetHeight,html:e.innerHTML}),o&&(t.crossOrigin=o),t.src=n,t.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',i.empty(e),i.appendChild(e,t)})}},resetPreview:function(){i.each(this.previews,function(e){var t=i.getData(e,"preview");i.setStyle(e,{width:t.width,height:t.height}),e.innerHTML=t.html,i.removeData(e,"preview")})},preview:function(){var e=this,t=e.imageData,a=e.canvasData,o=e.cropBoxData,n=o.width,r=o.height,s=t.width,d=t.height,c=o.left-a.left-t.left,l=o.top-a.top-t.top,h=i.getTransform(t),p={WebkitTransform:h,msTransform:h,transform:h};e.cropped&&!e.disabled&&(i.setStyle(e.image2,i.extend({width:s,height:d,marginLeft:-c,marginTop:-l},p)),i.each(e.previews,function(e){var t=i.getData(e,"preview"),a=t.width,o=t.height,h=a,u=o,m=1;n&&(u=r*(m=a/n)),r&&u>o&&(h=n*(m=o/r),u=o),i.setStyle(e,{width:h,height:u}),i.setStyle(i.getByTag(e,"img")[0],i.extend({width:s*m,height:d*m,marginLeft:-c*m,marginTop:-l*m},p))}))}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(4)),o="mouseup touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel";t.default={bind:function(){var e=this,t=e.options,a=e.element,n=e.cropper;i.isFunction(t.cropstart)&&i.addListener(a,"cropstart",t.cropstart),i.isFunction(t.cropmove)&&i.addListener(a,"cropmove",t.cropmove),i.isFunction(t.cropend)&&i.addListener(a,"cropend",t.cropend),i.isFunction(t.crop)&&i.addListener(a,"crop",t.crop),i.isFunction(t.zoom)&&i.addListener(a,"zoom",t.zoom),i.addListener(n,"mousedown touchstart pointerdown MSPointerDown",e.onCropStart=i.proxy(e.cropStart,e)),t.zoomable&&t.zoomOnWheel&&i.addListener(n,"wheel mousewheel DOMMouseScroll",e.onWheel=i.proxy(e.wheel,e)),t.toggleDragModeOnDblclick&&i.addListener(n,"dblclick",e.onDblclick=i.proxy(e.dblclick,e)),i.addListener(document,"mousemove touchmove pointermove MSPointerMove",e.onCropMove=i.proxy(e.cropMove,e)),i.addListener(document,o,e.onCropEnd=i.proxy(e.cropEnd,e)),t.responsive&&i.addListener(window,"resize",e.onResize=i.proxy(e.resize,e))},unbind:function(){var e=this,t=e.options,a=e.element,n=e.cropper;i.isFunction(t.cropstart)&&i.removeListener(a,"cropstart",t.cropstart),i.isFunction(t.cropmove)&&i.removeListener(a,"cropmove",t.cropmove),i.isFunction(t.cropend)&&i.removeListener(a,"cropend",t.cropend),i.isFunction(t.crop)&&i.removeListener(a,"crop",t.crop),i.isFunction(t.zoom)&&i.removeListener(a,"zoom",t.zoom),i.removeListener(n,"mousedown touchstart pointerdown MSPointerDown",e.onCropStart),t.zoomable&&t.zoomOnWheel&&i.removeListener(n,"wheel mousewheel DOMMouseScroll",e.onWheel),t.toggleDragModeOnDblclick&&i.removeListener(n,"dblclick",e.onDblclick),i.removeListener(document,"mousemove touchmove pointermove MSPointerMove",e.onCropMove),i.removeListener(document,o,e.onCropEnd),t.responsive&&i.removeListener(window,"resize",e.onResize)}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REGEXP_ACTIONS=void 0;var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(4)),o=t.REGEXP_ACTIONS=/^(e|w|s|n|se|sw|ne|nw|all|crop|move|zoom)$/;t.default={resize:function(){var e=this,t=e.options.restore,a=e.container,o=e.containerData;if(!e.disabled&&o){var n=a.offsetWidth/o.width,r=void 0,s=void 0;1===n&&a.offsetHeight===o.height||(t&&(r=e.getCanvasData(),s=e.getCropBoxData()),e.render(),t&&(e.setCanvasData(i.each(r,function(e,t){r[t]=e*n})),e.setCropBoxData(i.each(s,function(e,t){s[t]=e*n}))))}},dblclick:function(){var e=this;e.disabled||e.setDragMode(i.hasClass(e.dragBox,"cropper-crop")?"move":"crop")},wheel:function(e){var t=this,a=i.getEvent(e),o=Number(t.options.wheelZoomRatio)||.1,n=1;t.disabled||(a.preventDefault(),t.wheeling||(t.wheeling=!0,setTimeout(function(){t.wheeling=!1},50),a.deltaY?n=a.deltaY>0?1:-1:a.wheelDelta?n=-a.wheelDelta/120:a.detail&&(n=a.detail>0?1:-1),t.zoom(-n*o,a)))},cropStart:function(e){var t=this,a=t.options,n=i.getEvent(e),r=n.touches,s=void 0,d=void 0,c=void 0;if(!t.disabled){if(r){if((s=r.length)>1){if(!a.zoomable||!a.zoomOnTouch||2!==s)return;d=r[1],t.startX2=d.pageX,t.startY2=d.pageY,c="zoom"}d=r[0]}if(c=c||i.getData(n.target,"action"),o.test(c)){if(!1===i.dispatchEvent(t.element,"cropstart",{originalEvent:n,action:c}))return;n.preventDefault(),t.action=c,t.cropping=!1,t.startX=d?d.pageX:n.pageX,t.startY=d?d.pageY:n.pageY,"crop"===c&&(t.cropping=!0,i.addClass(t.dragBox,"cropper-modal"))}}},cropMove:function(e){var t=this,a=t.options,o=i.getEvent(e),n=o.touches,r=t.action,s=void 0,d=void 0;if(!t.disabled){if(n){if((s=n.length)>1){if(!a.zoomable||!a.zoomOnTouch||2!==s)return;d=n[1],t.endX2=d.pageX,t.endY2=d.pageY}d=n[0]}if(r){if(!1===i.dispatchEvent(t.element,"cropmove",{originalEvent:o,action:r}))return;o.preventDefault(),t.endX=d?d.pageX:o.pageX,t.endY=d?d.pageY:o.pageY,t.change(o.shiftKey,"zoom"===r?o:null)}}},cropEnd:function(e){var t=this,a=t.options,o=i.getEvent(e),n=t.action;t.disabled||n&&(o.preventDefault(),t.cropping&&(t.cropping=!1,i.toggleClass(t.dragBox,"cropper-modal",t.cropped&&a.modal)),t.action="",i.dispatchEvent(t.element,"cropend",{originalEvent:o,action:n}))}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(4));t.default={change:function(e,t){var a=this,o=a.options,n=a.containerData,r=a.canvasData,s=a.cropBoxData,d=o.aspectRatio,c=a.action,l=s.width,h=s.height,p=s.left,u=s.top,m=p+l,f=u+h,g=0,v=0,w=n.width,b=n.height,y=!0,x=void 0;!d&&e&&(d=l&&h?l/h:1),a.limited&&(g=s.minLeft,v=s.minTop,w=g+Math.min(n.width,r.width,r.left+r.width),b=v+Math.min(n.height,r.height,r.top+r.height));var C={x:a.endX-a.startX,y:a.endY-a.startY};switch(d&&(C.X=C.y*d,C.Y=C.x/d),c){case"all":p+=C.x,u+=C.y;break;case"e":if(C.x>=0&&(m>=w||d&&(u<=v||f>=b))){y=!1;break}l+=C.x,d&&(h=l/d,u-=C.Y/2),l<0&&(c="w",l=0);break;case"n":if(C.y<=0&&(u<=v||d&&(p<=g||m>=w))){y=!1;break}h-=C.y,u+=C.y,d&&(l=h*d,p+=C.X/2),h<0&&(c="s",h=0);break;case"w":if(C.x<=0&&(p<=g||d&&(u<=v||f>=b))){y=!1;break}l-=C.x,p+=C.x,d&&(h=l/d,u+=C.Y/2),l<0&&(c="e",l=0);break;case"s":if(C.y>=0&&(f>=b||d&&(p<=g||m>=w))){y=!1;break}h+=C.y,d&&(l=h*d,p-=C.X/2),h<0&&(c="n",h=0);break;case"ne":if(d){if(C.y<=0&&(u<=v||m>=w)){y=!1;break}h-=C.y,u+=C.y,l=h*d}else C.x>=0?m<w?l+=C.x:C.y<=0&&u<=v&&(y=!1):l+=C.x,C.y<=0?u>v&&(h-=C.y,u+=C.y):(h-=C.y,u+=C.y);l<0&&h<0?(c="sw",h=0,l=0):l<0?(c="nw",l=0):h<0&&(c="se",h=0);break;case"nw":if(d){if(C.y<=0&&(u<=v||p<=g)){y=!1;break}h-=C.y,u+=C.y,l=h*d,p+=C.X}else C.x<=0?p>g?(l-=C.x,p+=C.x):C.y<=0&&u<=v&&(y=!1):(l-=C.x,p+=C.x),C.y<=0?u>v&&(h-=C.y,u+=C.y):(h-=C.y,u+=C.y);l<0&&h<0?(c="se",h=0,l=0):l<0?(c="ne",l=0):h<0&&(c="sw",h=0);break;case"sw":if(d){if(C.x<=0&&(p<=g||f>=b)){y=!1;break}l-=C.x,p+=C.x,h=l/d}else C.x<=0?p>g?(l-=C.x,p+=C.x):C.y>=0&&f>=b&&(y=!1):(l-=C.x,p+=C.x),C.y>=0?f<b&&(h+=C.y):h+=C.y;l<0&&h<0?(c="ne",h=0,l=0):l<0?(c="se",l=0):h<0&&(c="nw",h=0);break;case"se":if(d){if(C.x>=0&&(m>=w||f>=b)){y=!1;break}h=(l+=C.x)/d}else C.x>=0?m<w?l+=C.x:C.y>=0&&f>=b&&(y=!1):l+=C.x,C.y>=0?f<b&&(h+=C.y):h+=C.y;l<0&&h<0?(c="nw",h=0,l=0):l<0?(c="sw",l=0):h<0&&(c="ne",h=0);break;case"move":a.move(C.x,C.y),y=!1;break;case"zoom":a.zoom(function(e,t,a,i){var o=Math.sqrt(e*e+t*t);return(Math.sqrt(a*a+i*i)-o)/o}(Math.abs(a.startX-a.startX2),Math.abs(a.startY-a.startY2),Math.abs(a.endX-a.endX2),Math.abs(a.endY-a.endY2)),t),a.startX2=a.endX2,a.startY2=a.endY2,y=!1;break;case"crop":if(!C.x||!C.y){y=!1;break}x=i.getOffset(a.cropper),p=a.startX-x.left,u=a.startY-x.top,l=s.minWidth,h=s.minHeight,C.x>0?c=C.y>0?"se":"ne":C.x<0&&(p-=l,c=C.y>0?"sw":"nw"),C.y<0&&(u-=h),a.cropped||(i.removeClass(a.cropBox,"cropper-hidden"),a.cropped=!0,a.limited&&a.limitCropBox(!0,!0))}y&&(s.width=l,s.height=h,s.left=p,s.top=u,a.action=c,a.renderCropBox()),a.startX=a.endX,a.startY=a.endY}}},function(e,t,a){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(4));t.default={crop:function(){var e=this;return e.ready&&!e.disabled&&(e.cropped||(e.cropped=!0,e.limitCropBox(!0,!0),e.options.modal&&o.addClass(e.dragBox,"cropper-modal"),o.removeClass(e.cropBox,"cropper-hidden")),e.setCropBoxData(e.initialCropBoxData)),e},reset:function(){var e=this;return e.ready&&!e.disabled&&(e.imageData=o.extend({},e.initialImageData),e.canvasData=o.extend({},e.initialCanvasData),e.cropBoxData=o.extend({},e.initialCropBoxData),e.renderCanvas(),e.cropped&&e.renderCropBox()),e},clear:function(){var e=this;return e.cropped&&!e.disabled&&(o.extend(e.cropBoxData,{left:0,top:0,width:0,height:0}),e.cropped=!1,e.renderCropBox(),e.limitCanvas(),e.renderCanvas(),o.removeClass(e.dragBox,"cropper-modal"),o.addClass(e.cropBox,"cropper-hidden")),e},replace:function(e,t){var a=this;return!a.disabled&&e&&(a.isImg&&(a.element.src=e),t?(a.url=e,a.image.src=e,a.ready&&(a.image2.src=e,o.each(a.previews,function(t){o.getByTag(t,"img")[0].src=e}))):(a.isImg&&(a.replaced=!0),a.options.data=null,a.load(e))),a},enable:function(){var e=this;return e.ready&&(e.disabled=!1,o.removeClass(e.cropper,"cropper-disabled")),e},disable:function(){var e=this;return e.ready&&(e.disabled=!0,o.addClass(e.cropper,"cropper-disabled")),e},destroy:function(){var e=this,t=e.element,a=e.image;return e.loaded?(e.isImg&&e.replaced&&(t.src=e.originalUrl),e.unbuild(),o.removeClass(t,"cropper-hidden")):e.isImg?o.removeListener(t,"load",e.start):a&&o.removeChild(a),o.removeData(t,"cropper"),e},move:function(e,t){var a=this,i=a.canvasData;return a.moveTo(o.isUndefined(e)?e:i.left+Number(e),o.isUndefined(t)?t:i.top+Number(t))},moveTo:function(e,t){var a=this,i=a.canvasData,n=!1;return o.isUndefined(t)&&(t=e),e=Number(e),t=Number(t),a.ready&&!a.disabled&&a.options.movable&&(o.isNumber(e)&&(i.left=e,n=!0),o.isNumber(t)&&(i.top=t,n=!0),n&&a.renderCanvas(!0)),a},zoom:function(e,t){var a=this,i=a.canvasData;return e=Number(e),e=e<0?1/(1-e):1+e,a.zoomTo(i.width*e/i.naturalWidth,t)},zoomTo:function(e,t){var a=this,i=a.options,n=a.canvasData,r=n.width,s=n.height,d=n.naturalWidth,c=n.naturalHeight,l=void 0,h=void 0,p=void 0,u=void 0;if((e=Number(e))>=0&&a.ready&&!a.disabled&&i.zoomable){if(l=d*e,h=c*e,!1===o.dispatchEvent(a.element,"zoom",{originalEvent:t,oldRatio:r/d,ratio:l/d}))return a;t?(p=o.getOffset(a.cropper),u=t.touches?o.getTouchesCenter(t.touches):{pageX:t.pageX,pageY:t.pageY},n.left-=(l-r)*((u.pageX-p.left-n.left)/r),n.top-=(h-s)*((u.pageY-p.top-n.top)/s)):(n.left-=(l-r)/2,n.top-=(h-s)/2),n.width=l,n.height=h,a.renderCanvas(!0)}return a},rotate:function(e){var t=this;return t.rotateTo((t.imageData.rotate||0)+Number(e))},rotateTo:function(e){var t=this;return e=Number(e),o.isNumber(e)&&t.ready&&!t.disabled&&t.options.rotatable&&(t.imageData.rotate=e%360,t.rotated=!0,t.renderCanvas(!0)),t},scale:function(e,t){var a=this,i=a.imageData,n=!1;return o.isUndefined(t)&&(t=e),e=Number(e),t=Number(t),a.ready&&!a.disabled&&a.options.scalable&&(o.isNumber(e)&&(i.scaleX=e,n=!0),o.isNumber(t)&&(i.scaleY=t,n=!0),n&&a.renderImage(!0)),a},scaleX:function(e){var t=this,a=t.imageData.scaleY;return t.scale(e,o.isNumber(a)?a:1)},scaleY:function(e){var t=this,a=t.imageData.scaleX;return t.scale(o.isNumber(a)?a:1,e)},getData:function(e){var t=this,a=t.options,i=t.imageData,n=t.canvasData,r=t.cropBoxData,s=void 0,d=void 0;return t.ready&&t.cropped?(d={x:r.left-n.left,y:r.top-n.top,width:r.width,height:r.height},s=i.width/i.naturalWidth,o.each(d,function(t,a){t/=s,d[a]=e?Math.round(t):t})):d={x:0,y:0,width:0,height:0},a.rotatable&&(d.rotate=i.rotate||0),a.scalable&&(d.scaleX=i.scaleX||1,d.scaleY=i.scaleY||1),d},setData:function(e){var t=this,a=t.options,i=t.imageData,n=t.canvasData,r={},s=void 0,d=void 0,c=void 0;return o.isFunction(e)&&(e=e.call(t.element)),t.ready&&!t.disabled&&o.isPlainObject(e)&&(a.rotatable&&o.isNumber(e.rotate)&&e.rotate!==i.rotate&&(i.rotate=e.rotate,t.rotated=s=!0),a.scalable&&(o.isNumber(e.scaleX)&&e.scaleX!==i.scaleX&&(i.scaleX=e.scaleX,d=!0),o.isNumber(e.scaleY)&&e.scaleY!==i.scaleY&&(i.scaleY=e.scaleY,d=!0)),s?t.renderCanvas():d&&t.renderImage(),c=i.width/i.naturalWidth,o.isNumber(e.x)&&(r.left=e.x*c+n.left),o.isNumber(e.y)&&(r.top=e.y*c+n.top),o.isNumber(e.width)&&(r.width=e.width*c),o.isNumber(e.height)&&(r.height=e.height*c),t.setCropBoxData(r)),t},getContainerData:function(){var e=this;return e.ready?e.containerData:{}},getImageData:function(){var e=this;return e.loaded?e.imageData:{}},getCanvasData:function(){var e=this,t=e.canvasData,a={};return e.ready&&o.each(["left","top","width","height","naturalWidth","naturalHeight"],function(e){a[e]=t[e]}),a},setCanvasData:function(e){var t=this,a=t.canvasData,i=a.aspectRatio;return o.isFunction(e)&&(e=e.call(t.element)),t.ready&&!t.disabled&&o.isPlainObject(e)&&(o.isNumber(e.left)&&(a.left=e.left),o.isNumber(e.top)&&(a.top=e.top),o.isNumber(e.width)?(a.width=e.width,a.height=e.width/i):o.isNumber(e.height)&&(a.height=e.height,a.width=e.height*i),t.renderCanvas(!0)),t},getCropBoxData:function(){var e=this,t=e.cropBoxData,a=void 0;return e.ready&&e.cropped&&(a={left:t.left,top:t.top,width:t.width,height:t.height}),a||{}},setCropBoxData:function(e){var t=this,a=t.cropBoxData,i=t.options.aspectRatio,n=void 0,r=void 0;return o.isFunction(e)&&(e=e.call(t.element)),t.ready&&t.cropped&&!t.disabled&&o.isPlainObject(e)&&(o.isNumber(e.left)&&(a.left=e.left),o.isNumber(e.top)&&(a.top=e.top),o.isNumber(e.width)&&(n=!0,a.width=e.width),o.isNumber(e.height)&&(r=!0,a.height=e.height),i&&(n?a.height=a.width/i:r&&(a.width=a.height*i)),t.renderCropBox()),t},getCroppedCanvas:function(e){var t=this;if(!t.ready||!window.HTMLCanvasElement)return null;if(!t.cropped)return o.getSourceCanvas(t.image,t.imageData);o.isPlainObject(e)||(e={});var a=t.getData(),n=a.width,r=a.height,s=n/r,d=void 0,c=void 0,l=void 0;o.isPlainObject(e)&&(d=e.width,c=e.height,d?(c=d/s,l=d/n):c&&(d=c*s,l=c/r));var h=Math.floor(d||n),p=Math.floor(c||r),u=o.createElement("canvas"),m=u.getContext("2d");u.width=h,u.height=p,e.fillColor&&(m.fillStyle=e.fillColor,m.fillRect(0,0,h,p));var f=function(){var e=o.getSourceCanvas(t.image,t.imageData),i=e.width,s=e.height,d=t.canvasData,c=[e],h=a.x+d.naturalWidth*(Math.abs(a.scaleX||1)-1)/2,p=a.y+d.naturalHeight*(Math.abs(a.scaleY||1)-1)/2,u=void 0,m=void 0,f=void 0,g=void 0,v=void 0,w=void 0;return h<=-n||h>i?h=u=f=v=0:h<=0?(f=-h,h=0,u=v=Math.min(i,n+h)):h<=i&&(f=0,u=v=Math.min(n,i-h)),u<=0||p<=-r||p>s?p=m=g=w=0:p<=0?(g=-p,p=0,m=w=Math.min(s,r+p)):p<=s&&(g=0,m=w=Math.min(r,s-p)),c.push(Math.floor(h),Math.floor(p),Math.floor(u),Math.floor(m)),l&&(f*=l,g*=l,v*=l,w*=l),v>0&&w>0&&c.push(Math.floor(f),Math.floor(g),Math.floor(v),Math.floor(w)),c}();return m.drawImage.apply(m,i(f)),u},setAspectRatio:function(e){var t=this,a=t.options;return t.disabled||o.isUndefined(e)||(a.aspectRatio=Math.max(0,e)||NaN,t.ready&&(t.initCropBox(),t.cropped&&t.renderCropBox())),t},setDragMode:function(e){var t=this,a=t.options,i=t.dragBox,n=t.face,r=void 0,s=void 0;return t.loaded&&!t.disabled&&(r="crop"===e,s=a.movable&&"move"===e,e=r||s?e:"none",o.setData(i,"action",e),o.toggleClass(i,"cropper-crop",r),o.toggleClass(i,"cropper-move",s),a.cropBoxMovable||(o.setData(n,"action",e),o.toggleClass(n,"cropper-crop",r),o.toggleClass(n,"cropper-move",s))),t}}}])}),function(){"use strict";angular.module("ngCropper",["ng"]).directive("ngCropper",["$q","$parse",function(e,t){function a(t,a){t=t||{};var o=e.when(t);return t.maximize&&(o=i(t,a)),o}function i(e,t){return o(t).then(function(t){return e.data=t,e})}function o(t){var a=e.defer(),i=new Image;return i.onload=function(){a.resolve({width:i.width,height:i.height})},i.src=t.src,a.promise}return{restrict:"A",scope:{options:"=ngCropperOptions",showEvent:"=ngCropperShow",hideEvent:"=ngCropperHide",proxy:"=?ngCropperProxy"},link:function(e,i,o){function n(){e.proxy&&t(e.proxy).assign(e.$parent,function(e,t){r[e].apply(r,t)})}var r,s=!1;e.$on(e.showEvent,function(){s||(s=!0,a(e.options,i[0]).then(function(e){r=new Cropper(i[0],e),n()}))}),e.$on(e.hideEvent,function(){s&&(s=!1,r.destroy())}),e.$watch("options.disabled",function(e){s&&(e&&r.disable(),e||r.enable())})}}}]).service("Cropper",["$q",function(e){function t(t){var a=e.defer(),i=new Image;return i.onload=function(e){a.resolve(e.target)},i.src=t,a.promise}function a(e){var t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t.style.display="none",document.body.appendChild(t),t}function i(e){e.parentElement.removeChild(e)}this.encode=function(t){var a=e.defer(),i=new FileReader;return i.onload=function(e){a.resolve(e.target.result)},i.readAsDataURL(t),a.promise},this.decode=function(e){for(var t=e.split(";")[0].split(":")[1],a=atob(e.split(",")[1]),i=new Uint8Array(a.length),o=0;o<a.length;o++)i[o]=a.charCodeAt(o);return new Blob([i],{type:t})},this.crop=function(e,o){var n=this.decode;return this.encode(e).then(t).then(function(t){var r=a(o);r.getContext("2d").drawImage(t,o.x,o.y,o.width,o.height,0,0,o.width,o.height);var s=r.toDataURL(e.type);return i(r),n(s)})},this.scale=function(e,o){var n=this.decode;return this.encode(e).then(t).then(function(t){var r,s,d,c=t.height,l=t.width;angular.isNumber(o)&&(s=c*(r=o),d=l*r),angular.isObject(o)&&(r=l/c,s=o.height,d=o.width,s&&!d?d=s*r:d&&!s&&(s=d/r));var h=a(o),p=h.getContext("2d");h.height=s,h.width=d,p.drawImage(t,0,0,l,c,0,0,d,s);var u=h.toDataURL(e.type);return i(h),n(u)})}}])}();
